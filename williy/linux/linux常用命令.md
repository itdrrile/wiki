## linux常用命令

### 1 ls

* 常用参数
  * -a 列出目录下所有文件，包括隐藏文件
  * -R 递归处理
  * -t 用文件和目录的更改时间排序
  * -l 显示详细信息

### 2 日期的遍历

```bash
start=$1
end=$2
while [ "$start" != "$end" ]
do
echo $start
let start=`date -d "-1 days ago ${start}" +%Y%m%d`
done
```

### 3 shell脚本并行执行

正常情况下，shell脚本是串行执行的，一条命令执行完才会执行接下来的命令，如果命令之间没有互相依赖关系时，可以让命令并行执行，并行执行的方法就是在命令后加上&符号

```bash
# !/bin/bash
for i in `seq 1 10` 
do
    echo $i &
done
```

这样不能保证命令的执行顺序，有时候需要保证for循环所有命令执行完后再向后执行接下来的命令，可以使用wait实现

```bash
# !/bin/bash
for i in `seq 1 10` 
do
    echo $i &
done
wait
```

### 4 vim

* 1) 光标的移动
  
  * ctrl + f 向下移动一页
  * ctrl + b 向上移动一页
  * crtl + d 向下移动半页
  * ctrl + u 向上移动半页
  * 0 移动到这一行最前面字符
  * $ 移动到这一行最后面字符
  * G 移动到文件的最后一行
  * nG 移动到文件的第n行
  * gg 移动到文件的第一行
  * w 每次移动到下一个单词的词头
  * e 每次移动到下一个单词的词尾
  * b 每次移动到上一个单词的词头
  * ge 每次移动到上一个单词的词尾
  
* 2）任意定位（在同一行）

  * 在同一行，向后定位某个字母 fd
  * 在同一行，向前定位某个字母 Fd

* 3) 视野内定位

  * H 移动到视野内第一行
  * M 移动到视野内中间行
  * L 移动到视野内最后一行

* 4）百分比定位

  * 20% 定义到全文20%处

* 3）字符串的查找和替换
  
  * /word 向光标之下寻找一个名为word的字符串
  * ?word 向光标之上寻找一个名为word的字符串
  * :n1,n2s/word1/word2/g 在n1和n2之间寻找word1这个字符串，并替换为word2
  * :1,$s/word1/word2/g 在第一行和最后一行之间寻找word1这个字符串，并替换为word2
  
* 4） 复制、删除、粘贴
  
  * dd 删除光标所在的那一整行
  * d1G 删除光标所在到第一行的数据
  * dG 删除光标所在到最后一行的数据
  * yy 复制光标所在行
  * p 将复制的数据在光标下一行粘上
  * P 将复制的数据在光标上一行粘上
  
* 4）内容的复原
  
  * u 复原前一个动作
* ctrl + r重做上一个动作
  
* 多文件编辑

  vim后面可以接好几个文件来打开

  * n 编辑下一个文件
  * N 编辑上一个文件
  * :files 列出目前vim打开的所有文件
  
* 窗口分区显示

  * : sp filename 打开一个新的窗口
  * ctrl + w + j/ctrl + w + ⬇ 光标可以移动到下方窗口
  * ctrl + w + k/ctrl + w + ⬆ 光标可以移动到上方窗口

* window和Linux的断行符转换

  * dos2unix [-kn] file [newfile]
  * unix2dos [-kn] file [newfile]
    * -k 保留文件原本的mtime时间格式
    * -n 保留原本的旧文件，将转换后的文件输出到新文件

### 5 tar

* 参数
  * -c 创建打包文件
  * -t 察看打包文件的内容有哪些文件
  * -x 解打包或解压缩功能，可以搭配-C在特定目录解开
  * -z 通过gzip的支持进行压缩/解压缩，此时文件名最好为*.tar.gz
  * -j 通过bzip2的支持进行压缩/解压缩，此时文件名最好为*.tar.bz2
  * -v 在压缩/解压缩的过程中，将正在处理的文件名显示出来
  * -f 后面要立刻接要被处理的文件名
  * -C 这个选项用在解压缩，若要在特定目录解压缩，可以使用这个选项
  * -p 保留备份数据的原本权限与属性，常用于备份重要的配置文件
  * -P 保留绝对路径，即允许备份数据中含有根目录存在之意
  * --exclude=FILE：在压缩的过程中，不要将FILE打包

### 6 cut

这个指令是以行为单位的

* cut -d '分割字符' -f fields
  * echo ${PATH};cut -d ':' -f 5
  * echo ${PATH};cut -d ':' -f 3,5
* cut -c 字符区间
  * export ${PATH}; cut -c 12-

### 7 grep

* 选项与参数
  * -a 将binary文件以text文件的方式搜寻数据
  * -c 计算找到'搜寻字符串'的次数
  * -i 忽略大小写的不同
  * -n 顺便输出行号
  * -v 反向选择

### 8 sort

* 选项与参数
  * -f 忽略大小写的差异
  * -b 忽略最前面的空白字符部分
  * -M 以月份名称来排序
  * -n 以纯数字排序
  * -r 反向排序
  * -u 就是uniq，相同数据中仅出现一行
  * -t 分割符号，默认是用 [tab] 键来分割
  * -k 以哪个区间来进行排序
* 例  
  * cat /etc/passwd | sort -t ':' -k 3|wc -l

### 9 uniq

* 选项与参数
  * -i 忽略大小写字符的不同
  * -c 进行计数

### 10 wc

   wc [-lwm]

* -l 仅列出行数
* -w 仅列出多少字
* -m 多少字符

### 11 tee

* tee会同时将数据流分送到文件去与屏幕

* 用法： tee [-a] file

* 选项与参数：

  -a：以累加的方式，将数据加入file中

### 12 文件夹的遍历

```bash
root_dir=/ssd/lyang
for sub_dir in `ls $root_dir`
do
    if [ -d $sub_dir ]
    then
        echo "is dir"
    else
        echo "is file"
    fi
done
```

### 13 nl

* 用法

  nl [选项] 文件

* 命令参数

  * -b 指定行号的指定的方式

    -b  a：无论是否由空行，也同样列出行号

    -b  t：如果由空行，空的那一行不要列出行号

  * -n列出行号表示的方法

    -n ln：行号在屏幕的最左方显示

    -n rn：行号在自己栏位的最右方显示，且不加0

    -n rz：行号在自己栏位的最右方显示，且加0

  * -w：行号栏位的占用位数

  * -p：在逻辑定界符处不用重新开始计算

### 14 sed

* 用法

  sed [-nefr] 动作

  * 选项和参数

    * -n 只有经过sed特殊处理的哪一行或者动作才会被列出来，而不是所有的stdin的数据
    * -e 直接再命令行界面上进行sed的动作编辑
    * -f 直接将sed的动作写在一个文件内，-f filename则可以执行执行filename内的sed的动作
    * -r sed的动作支持的是延伸型正则表达式的语法
    * -i 直接修改读取的文件内容，而不是由屏幕输出

  * 动作说明

    [n1,n2] function

    * n,n2 不见得会存在，一般代表选择进行动作的行数
    * function由下面这些东西
      * a： 新增，在当前行的下一行新增字符串
      * c：取代，字符串取代n1，n2之间的行
      * d：删除，因为是删除，所以d后面通常不接任何东西
      * i：插入，i后面可以接字符串，但是这些字符串会在当前的上一行出现
      * p：打印，亦即将某个选择的数据打印出，通常p会与参数sed -n 一起运行
      * s：取代，可以直接进行取代工作，通常这个s的动作可以搭配正则表达式

* sed是以行为单位的新增/删除功能

* 例子

  ```bash
  nl /etc/passwd | sed '2,5d'
  nl /etc/passwd | sed '3,$d'
  nl /ect/passwd | sed '2a drink tea' #在第三行增加字符串drink tea
  nl /etc/passwd | sed '2,5c No 2-5 number'
  nl /etc/passwd | sed -n '5,7p'
  cat /sbin/ifconfig | grep 'inet' | sed 's/^.*inet//g'
  sed -i 's/\.$/\!/g' aaa.txt
  ```

### 14 awk

* 用法

  awk '条件类型1{动作1} 条件类型2{动作2}' filename

* 变量名称

  * NF 每一行拥有的字段总数
  * NR 目前awk所处理的是第几行数据
  * FS 目前的分隔符，默认是空格

* 运算逻辑

  * 大于 >
  * 小于 < 
  * 大于或等于 >=
  * 小于或等于 <=
  * 等于 ==
  * 不等于 !=







